!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).RxSpy=e()}}(function(){return function e(t,r,n){function o(s,u){if(!r[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=window.Rx,o=e("../../operator/tag");n.Observable.prototype.tag=o.tag},{"../../operator/tag":5}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),e("./add/operator/tag");var n=e("./logger");r.defaultLogger=n.defaultLogger,r.toLogger=n.toLogger;var o=e("./match");r.matches=o.matches;var i=e("./plugin");r.BasePlugin=i.BasePlugin;var s=e("./spy");r.debug=s.debug,r.flush=s.flush,r._let=s._let,r.log=s.log,r.pause=s.pause,r.plugin=s.plugin,r.plugins=s.plugins,r.show=s.show,r.spy=s.spy},{"./add/operator/tag":1,"./logger":3,"./match":4,"./plugin":7,"./spy":13}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultLogger=console,r.toLogger=function(e){function t(t,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var s=" ".repeat(r);n=n?s+n:s,(u=e[t]||e.log).call.apply(u,[e,n].concat(o));var u}if(e.error&&e.group&&e.groupCollapsed&&e.groupEnd&&e.warn)return e;var r=0;return{error:function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.apply(void 0,["error",e].concat(r))},group:function(e){t("log",e),r+=2},groupCollapsed:function(e){t("log",e),r+=2},groupEnd:function(){r=Math.max(0,r-2)},log:function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.apply(void 0,["log",e].concat(r))},warn:function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.apply(void 0,["warn",e].concat(r))}}}},{}],4:[function(e,t,r){"use strict";function n(e){var t=e.operator;if(!t)return null;var r=t.tag;return r||null}Object.defineProperty(r,"__esModule",{value:!0});var o=e("./util");r.matches=function(e,t){if(o.isObservable(t))return e===t;var r=n(e);return"function"==typeof t?t(r,e):null!==r&&("string"==typeof t?t===r:t.test(r))},r.read=n,r.toString=function(e){return o.isObservable(e)?"[Observable]":"function"==typeof e?"[Function]":e.toString()}},{"./util":14}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.tag=function(e){return this.lift(new n(e))};var n=function(){function e(e){this.tag=e}return e.prototype.call=function(e,t){return t.subscribe(e)},e}()},{}],6:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../match"),i=function(e){function t(t,r,n){var i=e.call(this)||this;return i.notifications_=r,i.matcher_=function(e,r){return o.matches(e,t)&&-1!==i.notifications_.indexOf(r)},i.snapshotPlugin_=n,i}return n(t,e),t.prototype.beforeComplete=function(e){if((0,this.matcher_)(e.observable,"complete"))this.getSnapshot_(e)},t.prototype.beforeError=function(e,t){if((0,this.matcher_)(e.observable,"error"))this.getSnapshot_(e)},t.prototype.beforeNext=function(e,t){if((0,this.matcher_)(e.observable,"next"))this.getSnapshot_(e)},t.prototype.beforeSubscribe=function(e){if((0,this.matcher_)(e.observable,"subscribe"))this.getSnapshot_(e)},t.prototype.beforeUnsubscribe=function(e){if((0,this.matcher_)(e.observable,"unsubscribe"))this.getSnapshot_(e)},t.prototype.getSnapshot_=function(e){var t=this.snapshotPlugin_;return t?t.snapshotObservable(e):null},t}(e("./plugin").BasePlugin);r.DebugPlugin=i},{"../match":4,"./plugin":11}],7:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),n(e("./debug-plugin")),n(e("./let-plugin")),n(e("./log-plugin")),n(e("./pause-plugin")),n(e("./plugin")),n(e("./snapshot-plugin"))},{"./debug-plugin":6,"./let-plugin":8,"./log-plugin":9,"./pause-plugin":10,"./plugin":11,"./snapshot-plugin":12}],8:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../match"),i=function(e){function t(t,r){var n=e.call(this)||this;return n.match_=t,n.select_=r,n}return n(t,e),t.prototype.select=function(e){var t=this,r=t.match_,n=t.select_,i=e.observable;return o.matches(i,r)?n:null},t}(e("./plugin").BasePlugin);r.LetPlugin=i},{"../match":4,"./plugin":11}],9:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../logger"),i=e("../match"),s=function(e){function t(t,r,n){void 0===r&&(r=o.defaultLogger);var i=e.call(this)||this;return i.logger_=o.toLogger(r),i.match_=t,i.snapshotPlugin_=n,i}return n(t,e),t.prototype.beforeComplete=function(e){this.log_(e,"complete")},t.prototype.beforeError=function(e,t){this.log_(e,"error",t)},t.prototype.beforeNext=function(e,t){this.log_(e,"next",t)},t.prototype.beforeSubscribe=function(e){this.log_(e,"subscribe")},t.prototype.beforeUnsubscribe=function(e){this.log_(e,"unsubscribe")},t.prototype.log_=function(e,t,r){var n=this,o=n.logger_,s=n.match_,u=n.snapshotPlugin_,a=e.observable,c=(e.subscriber,e.subscription);if(i.matches(a,s)){var l=i.read(a),p="string"==typeof s?"":"; matching "+i.toString(s);switch(t){case"error":o.group("Tag = "+l+"; notification = "+t+p),o.error("Error =",r);break;case"next":o.group("Tag = "+l+"; notification = "+t+p),o.log("Value =",r);break;default:o.groupCollapsed("Tag = "+l+"; notification = "+t+p)}if(u){var f=u.snapshotSubscriber(e);if(f){var g=f.values,h=f.valuesFlushed;o.groupCollapsed("Subscriber"),o.log("Value count =",g.length+h),g.length>0&&o.log("Last value =",g[g.length-1].value);var b=f.subscriptions;o.groupCollapsed("Subscription"),b.forEach(function(e){if(e.subscription===c){var t=e.finalDestination,r=e.stackTrace;o.log("Root subscribe",t?t.stackTrace:r)}}),o.groupEnd(),o.groupEnd()}}o.groupCollapsed("Raw observable"),o.log(a),o.groupEnd(),o.groupEnd()}},t}(e("./plugin").BasePlugin);r.LogPlugin=s},{"../logger":3,"../match":4,"./plugin":11}],10:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=window.Rx,i=e("../logger"),s=e("../match"),u=e("./plugin"),a=e("../spy");window.Rx.unused,window.Rx.unused;var c=function(){function e(e){this.paused_=!0,this.states_=new Map,this.match_=e}return Object.defineProperty(e.prototype,"paused",{get:function(){return this.paused_},enumerable:!0,configurable:!0}),e.prototype.clear=function(e){void 0===e&&(e=function(){return!0}),this.states_.forEach(function(t){t.notifications_=t.notifications_.filter(function(t){return!e(t)})})},e.prototype.log=function(e){void 0===e&&(e=i.defaultLogger);var t=i.toLogger(e);t.group("Deck matching "+s.toString(this.match_)),t.log("Paused =",this.paused_),this.states_.forEach(function(e){t.group("Observable; tag = "+e.tag_),t.log("Notifications =",e.notifications_),t.groupEnd()}),t.groupEnd()},e.prototype.pause=function(){this.paused_=!0},e.prototype.resume=function(){this.states_.forEach(function(e){for(;e.notifications_.length>0;)e.subject_.next(e.notifications_.shift())}),this.paused_=!1},e.prototype.select=function(e){var t=this,r=e.observable;return function(e){var n=t.states_.get(r);return n?n.subscription_.unsubscribe():(n={notifications_:[],subject_:new o.Subject,subscription_:null,tag_:s.read(r)},t.states_.set(r,n)),n.subscription_=a.subscribeWithoutSpy.call(e.materialize(),{next:function(e){t.paused_?n.notifications_.push(e):n.subject_.next(e)}}),n.subject_.asObservable().dematerialize()}},e.prototype.skip=function(){this.states_.forEach(function(e){e.notifications_.length>0&&e.notifications_.shift()})},e.prototype.step=function(){this.states_.forEach(function(e){e.notifications_.length>0&&e.subject_.next(e.notifications_.shift())})},e.prototype.unsubscribe=function(){this.states_.forEach(function(e){e.subscription_&&(e.subscription_.unsubscribe(),e.subscription_=null)})},e}();r.Deck=c;var l=function(e){function t(t){var r=e.call(this)||this;return r.deck_=new c(t),r.match_=t,r}return n(t,e),Object.defineProperty(t.prototype,"deck",{get:function(){return this.deck_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"match",{get:function(){return this.match_},enumerable:!0,configurable:!0}),t.prototype.select=function(e){var t=this,r=t.deck_,n=t.match_,o=e.observable;return s.matches(o,n)?r.select(e):null},t.prototype.teardown=function(){var e=this.deck_;e&&(e.resume(),e.unsubscribe())},t}(u.BasePlugin);r.PausePlugin=l},{"../logger":3,"../match":4,"../spy":13,"./plugin":11}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.afterComplete=function(e){},e.prototype.afterError=function(e,t){},e.prototype.afterNext=function(e,t){},e.prototype.afterSubscribe=function(e){},e.prototype.afterUnsubscribe=function(e){},e.prototype.beforeComplete=function(e){},e.prototype.beforeError=function(e,t){},e.prototype.beforeNext=function(e,t){},e.prototype.beforeSubscribe=function(e){},e.prototype.beforeUnsubscribe=function(e){},e.prototype.flush=function(){},e.prototype.select=function(e){return null},e.prototype.teardown=function(){},e}();r.BasePlugin=n},{}],12:[function(e,t,r){"use strict";function n(e,t){-1===e.indexOf(t)&&e.push(t)}function o(e){var t=function(){var e=!1;return{filter:function(t){var r=e;return/subscribeWithSpy/.test(t.functionName)&&(e=!0),r}}},r=u.getSync(t());return e&&"undefined"!=typeof document&&u.get(t()).then(function(e){r.splice.apply(r,[0,r.length].concat(e))}),r}function i(e){var t=Object.getPrototypeOf(e);return t.constructor&&t.constructor.name?t.constructor.name:"Object"}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=e("stacktrace-js"),a=e("../match"),c=e("./plugin"),l=e("../spy"),p=function(e){function t(t){var r=void 0===t?{}:t,n=r.keptValues,o=void 0===n?4:n,i=r.sourceMaps,s=void 0!==i&&i,u=e.call(this)||this;return u.notificationRecordsStack_=[],u.keptValues_=o,u.observableRecordsMap_=new Map,u.sourceMaps_=s,u.subscriberRecordsMap_=new Map,u}return s(t,e),t.prototype.afterComplete=function(e){var t=this.notificationRecordsStack_.pop();if(t){var r=t.observableRecord;r&&(r.complete=!0,r.subscribers=[],r.tick=l.tick())}},t.prototype.afterError=function(e,t){var r=this.notificationRecordsStack_.pop();if(r){var n=r.observableRecord;n&&(n.error=t,n.subscribers=[],n.tick=l.tick())}},t.prototype.afterNext=function(e,t){this.notificationRecordsStack_.pop()},t.prototype.afterSubscribe=function(e){this.notificationRecordsStack_.pop()},t.prototype.afterUnsubscribe=function(e){var t=this.notificationRecordsStack_,r=e.subscriber,n=t.pop();if(n){var o=n.observableRecord;o&&(o.subscribers=o.subscribers.filter(function(e){return e.subscriber!==r}))}},t.prototype.beforeComplete=function(e){this.push("complete",e)},t.prototype.beforeError=function(e,t){this.push("error",e)},t.prototype.beforeNext=function(e,t){var r=this.push("next",e),n=r.observableRecord,o=r.subscriberRecord,i=Date.now();n&&(n.tick=l.tick()),o&&o.values.push({timestamp:i,value:t})},t.prototype.beforeSubscribe=function(e){var t=this,r=t.observableRecordsMap_,s=t.notificationRecordsStack_,u=t.sourceMaps_,c=t.subscriberRecordsMap_,p=e.observable,f=e.subscriber,g=r.get(p);g?g.tick=l.tick():(g={complete:!1,destinations:[],error:null,merges:[],observable:p,sources:[],subscribers:[],tag:a.read(p),tick:l.tick(),type:i(p)},r.set(p,g));var h=c.get(f);h?h.tick=l.tick():(h={subscriber:f,subscriptions:[],tick:l.tick(),values:[],valuesFlushed:0},c.set(f,h),g.subscribers.push(h));var b={destination:null,ref:e,stackTrace:o(u),timestamp:Date.now()};h.subscriptions.push(b);var d=s.length;if(d>0&&"next"===s[d-1].notification){var m=s[d-1],v=m.observableRecord,_=m.subscriptionRecord;v&&n(v.merges,g),_&&(b.destination=_)}else for(var y=d-1;y>-1;--y)if("subscribe"===s[y].notification){var w=s[y],S=w.observableRecord,_=w.subscriptionRecord;S&&(n(S.sources,g),n(g.destinations,S)),_&&(b.destination=_);break}s.push({notification:"subscribe",observableRecord:g,subscriberRecord:h,subscriptionRecord:b})},t.prototype.beforeUnsubscribe=function(e){this.push("unsubscribe",e)},t.prototype.flush=function(e){var t=this,r=e||{completed:!0,errored:!0},n=r.completed,o=r.errored,i=this,s=i.keptValues_;i.observableRecordsMap_;this.observableRecordsMap_.forEach(function(e){n&&e.complete||o&&e.error?t.observableRecordsMap_.delete(e.observable):e.subscribers.forEach(function(e){var t=e.values.length-s;t>0&&(e.values.splice(0,t),e.valuesFlushed+=t)})})},t.prototype.snapshotAll=function(e){var t=void 0===e?{}:e,r=t.filter,n=t.since,o=this,i=o.observableRecordsMap_,s=o.subscriberRecordsMap_,u=new Map,a=new Map,c=new Map,p=new Map;i.forEach(function(e,t){var r=e.complete,n=e.error,o=e.tag,i=e.tick,s=e.type;a.set(t,{complete:r,destinations:[],error:n,merges:[],observable:t,sources:[],subscribers:[],tag:o,tick:i,type:s})}),s.forEach(function(e,t){var r=e.subscriptions,n=e.tick,o=e.values,i=e.valuesFlushed;c.set(t,{subscriber:t,subscriptions:[],tick:n,values:o,valuesFlushed:i}),r.forEach(function(e){var t=e.ref,r=e.stackTrace,n=e.timestamp;u.set(t,e),p.set(t,{destination:null,finalDestination:null,stackTrace:r,subscription:t.subscription,timestamp:n})})}),a.forEach(function(e,t){var r=i.get(t),n=r.destinations,o=r.merges,s=r.sources,u=r.subscribers;e.destinations=n.map(function(e){return a.get(e.observable)}),e.merges=o.map(function(e){return a.get(e.observable)}),e.sources=s.map(function(e){return a.get(e.observable)}),e.subscribers=u.map(function(e){return c.get(e.subscriber)})}),c.forEach(function(e,t){var r=s.get(t).subscriptions;e.subscriptions=r.map(function(e){var t=e.ref,r=u.get(t).destination,n=p.get(t);return n.destination=r?p.get(r.ref):null,n})}),p.forEach(function(e){for(var t=e.destination,r=t;r;)if(e.finalDestination=r,(r=r.destination)===t){console.warn("Circular subscribtion found.");break}});var f=Array.from(a.values());return r&&(f=f.filter(r)),n&&(f=f.filter(function(e){return e.tick>n.tick})),{observables:f,tick:l.tick()}},t.prototype.snapshotObservable=function(e){return this.snapshotAll().observables.find(function(t){return t.observable===e.observable})||null},t.prototype.snapshotSubscriber=function(e){var t=this.snapshotObservable(e);return t?t.subscribers.find(function(t){return t.subscriber===e.subscriber})||null:null},t.prototype.push=function(e,t){var r={notification:e,observableRecord:null,subscriberRecord:null,subscriptionRecord:null},n=this,o=n.observableRecordsMap_,i=n.notificationRecordsStack_,s=t.observable,u=t.subscriber;return r.observableRecord=o.get(s)||null,r.observableRecord?(r.subscriberRecord=r.observableRecord.subscribers.find(function(e){return e.subscriber===u})||null,r.subscriberRecord&&(r.subscriptionRecord=r.subscriberRecord.subscriptions.find(function(e){return e.ref===t})||null)):console.warn("Observable Record not found; subscriptions made prior to calling 'spy' are not snapshotted."),i.push(r),r},t}(c.BasePlugin);r.SnapshotPlugin=p},{"../match":4,"../spy":13,"./plugin":11,"stacktrace-js":26}],13:[function(e,t,r){"use strict";function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];0===t.length&&(t=["complete","error","next","subscribe","unsubscribe"]);var n=w.find(function(e){return e instanceof v.SnapshotPlugin});return a(new v.DebugPlugin(e,t,n||null),"debug("+m.toString(e)+")")}function o(){w.forEach(function(e){return e.flush()})}function i(e,t){return a(new v.LetPlugin(e,t),"let("+m.toString(e)+")")}function s(e,t){var r=/.+/;e?"function"==typeof e.log&&(t=e,e=r):e=r;var n=w.find(function(e){return e instanceof v.SnapshotPlugin});return a(new v.LogPlugin(e,t,n||null),"log("+m.toString(e)+")")}function u(e){var t=new v.PausePlugin(e),r=a(t,"pause("+m.toString(e)+")"),n=t.deck;return n.teardown=r,n}function a(e,t){w.push(e),S.next(w);var r=function(){e.teardown(),w=w.filter(function(t){return t!==e}),S.next(w),O=O.filter(function(e){return e.teardown!==r})};return O.push({name:t,teardown:r}),r}function c(e,t){void 0===t&&(t=d.defaultLogger);var r=/.+/;e?"function"==typeof e.log&&(t=e,e=r):e=r;var n=w.find(function(e){return e instanceof v.SnapshotPlugin});if(!n)throw new Error("Snapshotting is not enabled.");var o=n.snapshotAll().observables.filter(function(t){return m.matches(t.observable,e)}),i=d.toLogger(t),s=o.length>3?"groupCollapsed":"group";i.group(o.length+" snapshot(s) matching "+m.toString(e)),o.forEach(function(e){i[s].call(i,"Tag = "+e.tag),i.log("State =",e.complete?"complete":e.error?"error":"incomplete"),e.error&&i.error("Error =",e.error);var t=e.subscribers,r=t.length>3?"groupCollapsed":"group";i.group(t.length+" subscriber(s)"),t.forEach(function(e){var t=e.values,n=e.valuesFlushed;i[r].call(i,"Subscriber"),i.log("Value count =",t.length+n),t.length>0&&i.log("Last value =",t[t.length-1].value);var o=e.subscriptions;i.groupCollapsed(o.length+" subscription(s)"),o.forEach(function(e){var t=e.finalDestination,r=e.stackTrace;i.log("Root subscribe",t?t.stackTrace:r)}),i.groupEnd(),i.groupEnd()}),i.groupEnd(),i.groupCollapsed("Raw snapshot"),i.log(e),i.groupEnd(),i.groupEnd()}),i.groupEnd()}function l(e){var t=(void 0===e?{}:e).plugins;if(h.Observable.prototype.subscribe!==y)throw new Error("Already spying on Observable.prototype.subscribe.");console.warn("Spying on Observable.prototype.subscribe."),h.Observable.prototype.subscribe=f,w=t||[new v.SnapshotPlugin],S.next(w);var r=function(){w.forEach(function(e){return e.teardown()}),w=[],S.next(w),S=new g.BehaviorSubject(w),O=[],h.Observable.prototype.subscribe=y};return O.push({name:"spy",teardown:r}),r}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=h.Observable.prototype.subscribe;h.Observable.prototype.subscribe=y;try{return h.Observable.prototype.subscribe.apply(this,e)}finally{h.Observable.prototype.subscribe=r}}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this,n=_.toSubscriber.apply(null,e),o={observable:r,subscriber:n,subscription:null},i={complete:function(){++E,w.forEach(function(e){return e.beforeComplete(o)}),n.complete(),w.forEach(function(e){return e.afterComplete(o)})},error:function(e){++E,w.forEach(function(t){return t.beforeError(o,e)}),n.error(e),w.forEach(function(t){return t.afterError(o,e)})},next:function(e){++E,w.forEach(function(t){return t.beforeNext(o,e)}),n.next(e),w.forEach(function(t){return t.afterNext(o,e)})},unsubscribed:!1},s=_.toSubscriber(i.next.bind(i),i.error.bind(i),i.complete.bind(i)),u={complete:function(){this.completed=!0,this.preLetSubject?this.preLetSubject.complete():this.postLetSubscriber.complete()},completed:!1,error:function(e){this.errored=!0,this.preLetSubject?this.preLetSubject.error(e):this.postLetSubscriber.error(e)},errored:!1,let:function(e){var t=this,r=e.map(function(e){return e.select(o)}).filter(Boolean);if(r.length>0){this.preLetSubject||(this.preLetSubject=new b.Subject),this.postLetSubscription&&this.postLetSubscription.unsubscribe();var n=this.preLetSubject.asObservable();r.forEach(function(e){return n=n.let(e)}),this.postLetSubscription=p.call(n,{complete:function(){return t.postLetSubscriber.complete()},error:function(e){return t.postLetSubscriber.error(e)},next:function(e){return t.postLetSubscriber.next(e)}})}else this.postLetSubscription&&(this.postLetSubscription.unsubscribe(),this.postLetSubscription=null,this.preLetSubject=null)},next:function(e){this.preLetSubject?this.preLetSubject.next(e):this.postLetSubscriber.next(e)},postLetSubscriber:s,postLetSubscription:null,preLetSubject:null,unsubscribed:!1},a=_.toSubscriber(u.next.bind(u),u.error.bind(u),u.complete.bind(u)),c=p.call(S,{next:function(e){return u.let(e)}}),l=a.unsubscribe;a.unsubscribe=function(){u.unsubscribed||(u.unsubscribed=!0,u.completed||u.errored||(u.postLetSubscription&&(u.postLetSubscription.unsubscribe(),u.postLetSubscription=null),u.postLetSubscriber.unsubscribe())),l.call(a)},n.add(a);var f=s.unsubscribe;s.unsubscribe=function(){i.unsubscribed?f.call(s):(i.unsubscribed=!0,++E,w.forEach(function(e){return e.beforeUnsubscribe(o)}),f.call(s),c.unsubscribe(),w.forEach(function(e){return e.afterUnsubscribe(o)}))},++E,w.forEach(function(e){return e.beforeSubscribe(o)});var g=y.call(r,a);return o.subscription=g,w.forEach(function(e){return e.afterSubscribe(o)}),g}Object.defineProperty(r,"__esModule",{value:!0});var g=window.Rx,h=window.Rx,b=window.Rx,d=e("./logger"),m=e("./match"),v=e("./plugin"),_=e("./util");window.Rx.unused;var y=h.Observable.prototype.subscribe,w=[],S=new g.BehaviorSubject(w),O=[],E=0;if("undefined"!=typeof window){var C={deck:function(e){var t=w.filter(function(e){return e instanceof v.PausePlugin});if(void 0!==e){var r=t[e-1];return r?r.deck:null}var n=d.toLogger(d.defaultLogger);n.group(t.length+" Deck(s)"),t.forEach(function(e,t){n.log(t+1+" pause("+m.toString(e.match)+")")}),n.groupEnd()},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.apply(null,e)},flush:function(){o()},let:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.apply(null,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.apply(null,e)},pause:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.apply(null,e)},show:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.apply(null,e)},spy:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l.apply(null,e)},undo:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length){var r=d.toLogger(d.defaultLogger);r.group(O.length+" undo(s)"),O.forEach(function(e,t){r.log(t+1+" "+e.name)}),r.groupEnd()}else e.map(function(e){return O[e-1]}).forEach(function(e){e&&e.teardown()})}};window.rxSpy=C}r.debug=n,r.flush=o,r._let=i,r.log=s,r.pause=u,r.plugin=a,r.plugins=function(){return w.slice()},r.show=c,r.spy=l,r.tick=function(){return E},r.subscribeWithoutSpy=p},{"./logger":3,"./match":4,"./plugin":7,"./util":14}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=window.Rx,o=window.Rx.Symbol;r.isObservable=function(e){return e&&e.subscribe};var i={closed:!0,error:function(e){throw e},next:function(e){},complete:function(){}};r.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(i)}},{}],15:[function(e,t,r){!function(n,o){"use strict";"object"==typeof r?t.exports=o(e("stackframe")):n.ErrorStackParser=o(n.StackFrame)}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,n=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter(function(e){return!!e.match(r)},this).map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),o=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(n[0])>-1?void 0:n[0];return new e({functionName:o,fileName:i,lineNumber:n[1],columnNumber:n[2],source:t})},this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter(function(e){return!e.match(n)},this).map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var r=t.split("@"),n=this.extractLocation(r.pop()),o=r.join("@")||void 0;return new e({functionName:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),o=[],i=2,s=n.length;i<s;i+=2){var u=r.exec(n[i]);u&&o.push(new e({fileName:u[2],lineNumber:u[1],source:n[i]}))}return o},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),o=[],i=0,s=n.length;i<s;i+=2){var u=r.exec(n[i]);u&&o.push(new e({functionName:u[3]||void 0,fileName:u[2],lineNumber:u[1],source:n[i]}))}return o},parseOpera11:function(r){return r.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this).map(function(t){var r,n=t.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var u=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e({functionName:s,args:u,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})},this)}}})},{stackframe:24}],16:[function(e,t,r){function n(){this._array=[],this._set=Object.create(null)}/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
var o=e("./util"),i=Object.prototype.hasOwnProperty;n.fromArray=function(e,t){for(var r=new n,o=0,i=e.length;o<i;o++)r.add(e[o],t);return r},n.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(e,t){var r=o.toSetString(e),n=i.call(this._set,r),s=this._array.length;n&&!t||this._array.push(e),n||(this._set[r]=s)},n.prototype.has=function(e){var t=o.toSetString(e);return i.call(this._set,t)},n.prototype.indexOf=function(e){var t=o.toSetString(e);if(i.call(this._set,t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},n.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},n.prototype.toArray=function(){return this._array.slice()},r.ArraySet=n},{"./util":22}],17:[function(e,t,r){function n(e){return e<0?1+(-e<<1):0+(e<<1)}function o(e){var t=e>>1;return 1==(1&e)?-t:t}/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 *
 * Based on the Base 64 VLQ implementation in Closure Compiler:
 * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java
 *
 * Copyright 2011 The Closure Compiler Authors. All rights reserved.
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *  * Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above
 *    copyright notice, this list of conditions and the following
 *    disclaimer in the documentation and/or other materials provided
 *    with the distribution.
 *  * Neither the name of Google Inc. nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
var i=e("./base64");r.encode=function(e){var t,r="",o=n(e);do{t=31&o,(o>>>=5)>0&&(t|=32),r+=i.encode(t)}while(o>0);return r},r.decode=function(e,t,r){var n,s,u=e.length,a=0,c=0;do{if(t>=u)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=i.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));n=!!(32&s),a+=(s&=31)<<c,c+=5}while(n);r.value=o(a),r.rest=t}},{"./base64":18}],18:[function(e,t,r){/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");r.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},r.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],19:[function(e,t,r){function n(e,t,o,i,s,u){var a=Math.floor((t-e)/2)+e,c=s(o,i[a],!0);return 0===c?a:c>0?t-a>1?n(a,t,o,i,s,u):u==r.LEAST_UPPER_BOUND?t<i.length?t:-1:a:a-e>1?n(e,a,o,i,s,u):u==r.LEAST_UPPER_BOUND?a:e<0?-1:e}/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,t,o,i){if(0===t.length)return-1;var s=n(-1,t.length,e,t,o,i||r.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===o(t[s],t[s-1],!0);)--s;return s}},{}],20:[function(e,t,r){/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
function n(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function o(e,t){return Math.round(e+Math.random()*(t-e))}function i(e,t,r,s){if(r<s){var u=r-1;n(e,o(r,s),s);for(var a=e[s],c=r;c<s;c++)t(e[c],a)<=0&&n(e,u+=1,c);n(e,u+1,c);var l=u+1;i(e,t,r,l-1),i(e,t,l+1,s)}}r.quickSort=function(e,t){i(e,t,0,e.length-1)}},{}],21:[function(e,t,r){function n(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new s(t):new o(t)}function o(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=u.getArg(t,"version"),n=u.getArg(t,"sources"),o=u.getArg(t,"names",[]),i=u.getArg(t,"sourceRoot",null),s=u.getArg(t,"sourcesContent",null),a=u.getArg(t,"mappings"),l=u.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);n=n.map(String).map(u.normalize).map(function(e){return i&&u.isAbsolute(i)&&u.isAbsolute(e)?u.relative(i,e):e}),this._names=c.fromArray(o.map(String),!0),this._sources=c.fromArray(n,!0),this.sourceRoot=i,this.sourcesContent=s,this._mappings=a,this.file=l}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function s(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=u.getArg(t,"version"),o=u.getArg(t,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new c,this._names=new c;var i={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=u.getArg(e,"offset"),r=u.getArg(t,"line"),o=u.getArg(t,"column");if(r<i.line||r===i.line&&o<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=t,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new n(u.getArg(e,"map"))}})}/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
var u=e("./util"),a=e("./binary-search"),c=e("./array-set").ArraySet,l=e("./base64-vlq"),p=e("./quick-sort").quickSort;n.fromSourceMap=function(e){return o.fromSourceMap(e)},n.prototype._version=3,n.prototype.__generatedMappings=null,Object.defineProperty(n.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),n.prototype.__originalMappings=null,Object.defineProperty(n.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),n.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},n.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},n.GENERATED_ORDER=1,n.ORIGINAL_ORDER=2,n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.prototype.eachMapping=function(e,t,r){var o,i=t||null;switch(r||n.GENERATED_ORDER){case n.GENERATED_ORDER:o=this._generatedMappings;break;case n.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;o.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=s&&(t=u.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},n.prototype.allGeneratedPositionsFor=function(e){var t=u.getArg(e,"line"),r={source:u.getArg(e,"source"),originalLine:t,originalColumn:u.getArg(e,"column",0)};if(null!=this.sourceRoot&&(r.source=u.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var n=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",u.compareByOriginalPositions,a.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var s=i.originalLine;i&&i.originalLine===s;)n.push({line:u.getArg(i,"generatedLine",null),column:u.getArg(i,"generatedColumn",null),lastColumn:u.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o];else for(var c=i.originalColumn;i&&i.originalLine===t&&i.originalColumn==c;)n.push({line:u.getArg(i,"generatedLine",null),column:u.getArg(i,"generatedColumn",null),lastColumn:u.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o]}return n},r.SourceMapConsumer=n,(o.prototype=Object.create(n.prototype)).consumer=n,o.fromSourceMap=function(e){var t=Object.create(o.prototype),r=t._names=c.fromArray(e._names.toArray(),!0),n=t._sources=c.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),a=t.__generatedMappings=[],l=t.__originalMappings=[],f=0,g=s.length;f<g;f++){var h=s[f],b=new i;b.generatedLine=h.generatedLine,b.generatedColumn=h.generatedColumn,h.source&&(b.source=n.indexOf(h.source),b.originalLine=h.originalLine,b.originalColumn=h.originalColumn,h.name&&(b.name=r.indexOf(h.name)),l.push(b)),a.push(b)}return p(t.__originalMappings,u.compareByOriginalPositions),t},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?u.join(this.sourceRoot,e):e},this)}}),o.prototype._parseMappings=function(e,t){for(var r,n,o,s,a,c=1,f=0,g=0,h=0,b=0,d=0,m=e.length,v=0,_={},y={},w=[],S=[];v<m;)if(";"===e.charAt(v))c++,v++,f=0;else if(","===e.charAt(v))v++;else{for((r=new i).generatedLine=c,s=v;s<m&&!this._charIsMappingSeparator(e,s);s++);if(n=e.slice(v,s),o=_[n])v+=n.length;else{for(o=[];v<s;)l.decode(e,v,y),a=y.value,v=y.rest,o.push(a);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");_[n]=o}r.generatedColumn=f+o[0],f=r.generatedColumn,o.length>1&&(r.source=b+o[1],b+=o[1],r.originalLine=g+o[2],g=r.originalLine,r.originalLine+=1,r.originalColumn=h+o[3],h=r.originalColumn,o.length>4&&(r.name=d+o[4],d+=o[4])),S.push(r),"number"==typeof r.originalLine&&w.push(r)}p(S,u.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,p(w,u.compareByOriginalPositions),this.__originalMappings=w},o.prototype._findMapping=function(e,t,r,n,o,i){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return a.search(e,t,o,i)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var t={generatedLine:u.getArg(e,"line"),generatedColumn:u.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",u.compareByGeneratedPositionsDeflated,u.getArg(e,"bias",n.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===t.generatedLine){var i=u.getArg(o,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=u.join(this.sourceRoot,i)));var s=u.getArg(o,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:u.getArg(o,"originalLine",null),column:u.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=u.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=u.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!r.path||"/"==r.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var t=u.getArg(e,"source");if(null!=this.sourceRoot&&(t=u.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var r={source:t=this._sources.indexOf(t),originalLine:u.getArg(e,"line"),originalColumn:u.getArg(e,"column")},o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",u.compareByOriginalPositions,u.getArg(e,"bias",n.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:u.getArg(i,"generatedLine",null),column:u.getArg(i,"generatedColumn",null),lastColumn:u.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},r.BasicSourceMapConsumer=o,(s.prototype=Object.create(n.prototype)).constructor=n,s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),s.prototype.originalPositionFor=function(e){var t={generatedLine:u.getArg(e,"line"),generatedColumn:u.getArg(e,"column")},r=a.search(t,this._sections,function(e,t){var r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[r];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},s.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(-1!==r.consumer.sources.indexOf(u.getArg(e,"source"))){var n=r.consumer.generatedPositionFor(e);if(n)return{line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},s.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var n=this._sections[r],o=n.consumer._generatedMappings,i=0;i<o.length;i++){var s=o[i],a=n.consumer._sources.at(s.source);null!==n.consumer.sourceRoot&&(a=u.join(n.consumer.sourceRoot,a)),this._sources.add(a),a=this._sources.indexOf(a);var c=n.consumer._names.at(s.name);this._names.add(c),c=this._names.indexOf(c);var l={source:a,generatedLine:s.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(n.generatedOffset.generatedLine===s.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:c};this.__generatedMappings.push(l),"number"==typeof l.originalLine&&this.__originalMappings.push(l)}p(this.__generatedMappings,u.compareByGeneratedPositionsDeflated),p(this.__originalMappings,u.compareByOriginalPositions)},r.IndexedSourceMapConsumer=s},{"./array-set":16,"./base64-vlq":17,"./binary-search":19,"./quick-sort":20,"./util":22}],22:[function(e,t,r){function n(e){var t=e.match(c);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function i(e){var t=e,i=n(e);if(i){if(!i.path)return e;t=i.path}for(var s,u=r.isAbsolute(t),a=t.split(/\/+/),c=0,l=a.length-1;l>=0;l--)"."===(s=a[l])?a.splice(l,1):".."===s?c++:c>0&&(""===s?(a.splice(l+1,c),c=0):(a.splice(l,2),c--));return""===(t=a.join("/"))&&(t=u?"/":"."),i?(i.path=t,o(i)):t}function s(e){return e}function u(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function a(e,t){return e===t?0:e>t?1:-1}r.getArg=/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};var c=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,l=/^data:.+\,.+$/;r.urlParse=n,r.urlGenerate=o,r.normalize=i,r.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var r=n(t),s=n(e);if(s&&(e=s.path||"/"),r&&!r.scheme)return s&&(r.scheme=s.scheme),o(r);if(r||t.match(l))return t;if(s&&!s.host&&!s.path)return s.host=t,o(s);var u="/"===t.charAt(0)?t:i(e.replace(/\/+$/,"")+"/"+t);return s?(s.path=u,o(s)):u},r.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(c)},r.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};var p=!("__proto__"in Object.create(null));r.toSetString=p?s:function(e){return u(e)?"$"+e:e},r.fromSetString=p?s:function(e){return u(e)?e.slice(1):e},r.compareByOriginalPositions=function(e,t,r){var n=e.source-t.source;return 0!==n?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)||r?n:0!=(n=e.generatedColumn-t.generatedColumn)?n:0!=(n=e.generatedLine-t.generatedLine)?n:e.name-t.name},r.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!=(n=e.generatedColumn-t.generatedColumn)||r?n:0!=(n=e.source-t.source)?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)?n:e.name-t.name},r.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r?r:0!=(r=e.generatedColumn-t.generatedColumn)?r:0!==(r=a(e.source,t.source))?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)?r:a(e.name,t.name)}},{}],23:[function(e,t,r){!function(n,o){"use strict";"object"==typeof r?t.exports=o(e("stackframe")):n.StackGenerator=o(n.StackFrame)}(this,function(e){return{backtrace:function(t){var r=[],n=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(n=t.maxStackSize);for(var o=arguments.callee;o&&r.length<n;){for(var i=new Array(o.arguments.length),s=0;s<i.length;++s)i[s]=o.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch(e){break}}return r}}})},{stackframe:24}],24:[function(e,t,r){!function(e,n){"use strict";"object"==typeof r?t.exports=n():e.StackFrame=n()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}function n(e){if(e instanceof Object)for(var r=0;r<a.length;r++)e.hasOwnProperty(a[r])&&void 0!==e[a[r]]&&this["set"+t(a[r])](e[a[r]])}var o=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],u=["args"],a=o.concat(i,s,u);n.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof n)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new n(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var c=0;c<o.length;c++)n.prototype["get"+t(o[c])]=r(o[c]),n.prototype["set"+t(o[c])]=function(e){return function(t){this[e]=Boolean(t)}}(o[c]);for(var l=0;l<i.length;l++)n.prototype["get"+t(i[l])]=r(i[l]),n.prototype["set"+t(i[l])]=function(t){return function(r){if(!e(r))throw new TypeError(t+" must be a Number");this[t]=Number(r)}}(i[l]);for(var p=0;p<s.length;p++)n.prototype["get"+t(s[p])]=r(s[p]),n.prototype["set"+t(s[p])]=function(e){return function(t){this[e]=String(t)}}(s[p]);return n})},{}],25:[function(e,t,r){!function(n,o){"use strict";"object"==typeof r?t.exports=o(e("source-map/lib/source-map-consumer"),e("stackframe")):n.StackTraceGPS=o(n.SourceMap||n.sourceMap,n.StackFrame)}(this,function(e,t){"use strict";function r(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.open("get",e),n.onerror=r,n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300||"file://"===e.substr(0,7)&&n.responseText?t(n.responseText):r(new Error("HTTP status: "+n.status+" retrieving "+e)))},n.send()})}function n(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function o(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(e,t){for(var r=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],n=e.split("\n"),o="",i=Math.min(t,20),s=0;s<i;++s){var u=n[t-s-1],a=u.indexOf("//");if(a>=0&&(u=u.substr(0,a)),u){o=u+o;for(var c=r.length,l=0;l<c;l++){var p=r[l].exec(o);if(p&&p[1])return p[1]}}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function u(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function a(e){var t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/m.exec(e);if(t&&t[1])return t[1];throw new Error("sourceMappingURL not found")}function c(e,r,n){return new Promise(function(o,i){var s=r.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(s.source){var u=r.sourceContentFor(s.source);u&&(n[s.source]=u),o(new t({functionName:s.name||e.functionName,args:e.args,fileName:s.source,lineNumber:s.line,columnNumber:s.column}))}else i(new Error("Could not get original source for given stackframe and source map"))})}return function l(p){if(!(this instanceof l))return new l(p);p=p||{},this.sourceCache=p.sourceCache||{},this.sourceMapConsumerCache=p.sourceMapConsumerCache||{},this.ajax=p.ajax||r,this._atob=p.atob||n,this._get=function(e){return new Promise(function(t,r){var n="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(p.offline&&!n)r(new Error("Cannot make network requests in offline mode"));else if(n){var o=/^data:application\/json;([\w=:"-]+;)*base64,/,i=e.match(o);if(i){var s=i[0].length,u=e.substr(s),a=this._atob(u);this.sourceCache[e]=a,t(a)}else r(new Error("The encoding of the inline sourcemap is not supported"))}else{var c=this.ajax(e,{method:"get"});this.sourceCache[e]=c,c.then(t,r)}}.bind(this))},this._getSourceMapConsumer=function(t,r){return new Promise(function(n,i){if(this.sourceMapConsumerCache[t])n(this.sourceMapConsumerCache[t]);else{var s=new Promise(function(n,i){return this._get(t).then(function(t){"string"==typeof t&&(t=o(t.replace(/^\)\]\}'/,""))),void 0===t.sourceRoot&&(t.sourceRoot=r),n(new e.SourceMapConsumer(t))},i)}.bind(this));this.sourceMapConsumerCache[t]=s,n(s)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,r){this.getMappedLocation(e).then(function(e){function r(){t(e)}this.findFunctionName(e).then(t,r).catch(r)}.bind(this),r)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(r,n){u(e),this._get(e.fileName).then(function(n){var o=e.lineNumber,s=e.columnNumber,u=i(n,o);r(u?new t({functionName:u,args:e.args,fileName:e.fileName,lineNumber:o,columnNumber:s}):e)},n).catch(n)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(t,r){s(),u(e);var n=this.sourceCache,o=e.fileName;this._get(o).then(function(r){var i=a(r),s="data:"===i.substr(0,5),u=o.substring(0,o.lastIndexOf("/")+1);return"/"===i[0]||s||/^https?:\/\/|^\/\//i.test(i)||(i=u+i),this._getSourceMapConsumer(i,u).then(function(r){return c(e,r,n).then(t).catch(function(){t(e)})})}.bind(this),r).catch(r)}.bind(this))}}})},{"source-map/lib/source-map-consumer":21,stackframe:24}],26:[function(e,t,r){!function(n,o){"use strict";"object"==typeof r?t.exports=o(e("error-stack-parser"),e("stack-generator"),e("stacktrace-gps")):n.StackTrace=o(n.ErrorStackParser,n.StackGenerator,n.StackTraceGPS)}(this,function(e,t,r){function n(e,t){var r={};return[e,t].forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}),r}function o(e){return e.stack||e["opera#sourceloc"]}function i(e,t){return"function"==typeof t?e.filter(t):e}var s={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},u=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var t=u();return o(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(r){r=n(s,r);var a=u();return i(o(a)?e.parse(a):t.backtrace(r),r.filter)},fromError:function(t,o){o=n(s,o);var u=new r(o);return new Promise(function(r){var n=i(e.parse(t),o.filter);r(Promise.all(n.map(function(e){return new Promise(function(t){function r(){t(e)}u.pinpoint(e).then(t,r).catch(r)})})))}.bind(this))},generateArtificially:function(e){e=n(s,e);var r=t.backtrace(e);return"function"==typeof e.filter&&(r=r.filter(e.filter)),Promise.resolve(r)},instrument:function(e,t,r,n){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(t,r).catch(r),e.apply(n||this,arguments)}catch(e){throw o(e)&&this.fromError(e).then(t,r).catch(r),e}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,r,n){return new Promise(function(o,i){var s=new XMLHttpRequest;if(s.onerror=i,s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<400?o(s.responseText):i(new Error("POST to "+t+" failed with status: "+s.status)))},s.open("post",t),s.setRequestHeader("Content-Type","application/json"),n&&"object"==typeof n.headers){var u=n.headers;for(var a in u)u.hasOwnProperty(a)&&s.setRequestHeader(a,u[a])}var c={stack:e};void 0!==r&&null!==r&&(c.message=r),s.send(JSON.stringify(c))})}}})},{"error-stack-parser":15,"stack-generator":23,"stacktrace-gps":25}]},{},[2])(2)});